# WebKin

Kinematic Tree Visualizer - веб-сервер для визуализации и управления кинематическими деревьями в реальном времени.

## Возможности

- Визуализация кинематических цепей в браузере
- Управление углами сочленений через WebSocket
- Интеграция с MQTT для получения данных с роботов
- REST API для программного управления

## Установка

```bash
pip install -r requirements.txt
```

## Запуск

```bash
uvicorn server.main:app --host 0.0.0.0 --port 8000
```

Или с автоперезагрузкой при разработке:

```bash
uvicorn server.main:app --reload
```

После запуска откройте http://localhost:8000 в браузере.

## Конфигурация

Переменные окружения:

| Переменная | По умолчанию | Описание |
|------------|--------------|----------|
| `MQTT_BROKER` | `localhost` | Адрес MQTT брокера |
| `MQTT_PORT` | `1883` | Порт MQTT брокера |
| `MQTT_TOPIC` | `robot/joints` | Топик для получения данных сочленений |

## API

### REST

- `GET /` - главная страница
- `GET /api/tree` - структура кинематического дерева
- `GET /api/scene` - текущее состояние сцены
- `POST /api/joints` - установка углов сочленений

### WebSocket

- `ws://localhost:8000/ws` - подключение для получения обновлений в реальном времени

Формат сообщений:
```json
{"type": "joint_update", "joints": {"joint_name": 1.57}}
```

## Структура проекта

```
webkin/
├── server/
│   ├── main.py        # FastAPI приложение
│   └── kinematic.py   # Логика кинематики
├── static/
│   ├── index.html     # Веб-интерфейс
│   ├── app.js         # Клиентский код
│   └── kinematic.js   # Визуализация
└── requirements.txt
```
